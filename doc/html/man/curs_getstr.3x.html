<!--
  ****************************************************************************
  * Copyright 2018-2020,2021 Thomas E. Dickey                                *
  * Copyright 1998-2010,2017 Free Software Foundation, Inc.                  *
  *                                                                          *
  * Permission is hereby granted, free of charge, to any person obtaining a  *
  * copy of this software and associated documentation files (the            *
  * "Software"), to deal in the Software without restriction, including      *
  * without limitation the rights to use, copy, modify, merge, publish,      *
  * distribute, distribute with modifications, sublicense, and/or sell       *
  * copies of the Software, and to permit persons to whom the Software is    *
  * furnished to do so, subject to the following conditions:                 *
  *                                                                          *
  * The above copyright notice and this permission notice shall be included  *
  * in all copies or substantial portions of the Software.                   *
  *                                                                          *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *
  * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *
  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *
  * IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *
  * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *
  * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *
  * THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *
  *                                                                          *
  * Except as contained in this notice, the name(s) of the above copyright   *
  * holders shall not be used in advertising or otherwise to promote the     *
  * sale, use or other dealings in this Software without prior written       *
  * authorization.                                                           *
  ****************************************************************************
  * @Id: curs_getstr.3x,v 1.33 2021/05/22 21:36:35 tom Exp @
  * X/Open says also until EOf
  * X/Open says then an EOS is added to the result
  * X/Open doesn't mention n&lt;0
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta name="generator" content="Manpage converted by man2html - see https://invisible-island.net/scripts/readme.html#others_scripts">
<TITLE>curs_getstr 3X</TITLE>
<link rel="author" href="mailto:bug-ncurses@gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</HEAD>
<BODY>
<H1 class="no-header">curs_getstr 3X</H1>
<PRE>
<B><A HREF="curs_getstr.3X.html">curs_getstr(3X)</A></B>                                                <B><A HREF="curs_getstr.3X.html">curs_getstr(3X)</A></B>




</PRE><H2><a name="h2-NAME">NAME</a></H2><PRE>
       <B>getstr</B>, <B>getnstr</B>, <B>wgetstr</B>, <B>wgetnstr</B>, <B>mvgetstr</B>, <B>mvgetnstr</B>, <B>mvwgetstr</B>,
       <B>mvwgetnstr</B> - accept character strings from <B>curses</B> terminal keyboard


</PRE><H2><a name="h2-SYNOPSIS">SYNOPSIS</a></H2><PRE>
       <B>#include</B> <B>&lt;curses.h&gt;</B>

       <B>int</B> <B>getstr(char</B> <B>*</B><I>str</I><B>);</B>
       <B>int</B> <B>getnstr(char</B> <B>*</B><I>str</I><B>,</B> <B>int</B> <I>n</I><B>);</B>
       <B>int</B> <B>wgetstr(WINDOW</B> <B>*</B><I>win</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>);</B>
       <B>int</B> <B>wgetnstr(WINDOW</B> <B>*</B><I>win</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>,</B> <B>int</B> <I>n</I><B>);</B>

       <B>int</B> <B>mvgetstr(int</B> <I>y</I><B>,</B> <B>int</B> <I>x</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>);</B>
       <B>int</B> <B>mvwgetstr(WINDOW</B> <B>*</B><I>win</I><B>,</B> <B>int</B> <I>y</I><B>,</B> <B>int</B> <I>x</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>);</B>
       <B>int</B> <B>mvgetnstr(int</B> <I>y</I><B>,</B> <B>int</B> <I>x</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>,</B> <B>int</B> <I>n</I><B>);</B>
       <B>int</B> <B>mvwgetnstr(WINDOW</B> <B>*</B><I>win</I><B>,</B> <B>int</B> <I>y</I><B>,</B> <B>int</B> <I>x</I><B>,</B> <B>char</B> <B>*</B><I>str</I><B>,</B> <B>int</B> <I>n</I><B>);</B>


</PRE><H2><a name="h2-DESCRIPTION">DESCRIPTION</a></H2><PRE>
       The function <B>getstr</B> is equivalent to a series of calls to <B>getch</B>,  until
       a  newline or carriage return is received (the terminating character is
       not included in the returned string).  The resulting value is placed in
       the area pointed to by the character pointer <I>str</I>, followed by a NUL.

       The  <B>getnstr</B>  function reads from the <I>stdscr</I> default window.  The other
       functions, such as <B>wgetnstr</B>, read from the window given as a parameter.

       <B>getnstr</B> reads at most <I>n</I> characters, thus preventing a possible overflow
       of  the input buffer.  Any attempt to enter more characters (other than
       the terminating newline or carriage return) causes  a  beep.   Function
       keys also cause a beep and are ignored.

       The user's <I>erase</I> and <I>kill</I> characters are interpreted:

       <B>o</B>   The  <I>erase</I>  character (e.g., <B>^H</B>) erases the character at the end of
           the buffer, moving the cursor to the left.

           If <I>keypad</I> mode is on for the window, <B>KEY_LEFT</B> and <B>KEY_BACKSPACE</B> are
           both considered equivalent to the user's erase character.

       <B>o</B>   The <I>kill</I> character (e.g., <B>^U</B>) erases the entire buffer, leaving the
           cursor at the beginning of the buffer.

       Characters input are echoed only if <B>echo</B>  is  currently  on.   In  that
       case,  backspace is echoed as deletion of the previous character (typi-
       cally a left motion).


</PRE><H2><a name="h2-RETURN-VALUE">RETURN VALUE</a></H2><PRE>
       All routines return the integer <B>ERR</B> upon failure and an <B>OK</B> (SVr4 speci-
       fies  only  "an  integer value other than <B>ERR</B>") upon successful comple-
       tion.

       X/Open defines no error conditions.

       In this implementation, these functions return an error if  the  window
       pointer is null, or if its timeout expires without having any data.

       This  implementation  provides an extension as well.  If a <B>SIGWINCH</B> in-
       terrupts the function, it will return <B>KEY_RESIZE</B> rather than <B>OK</B> or <B>ERR</B>.

       Functions with a "mv" prefix first  perform  a  cursor  movement  using
       <B>wmove</B>, and return an error if the position is outside the window, or if
       the window pointer is null.


</PRE><H2><a name="h2-NOTES">NOTES</a></H2><PRE>
       Note that <B>getstr</B>, <B>mvgetstr</B>, and <B>mvwgetstr</B> may be macros.


</PRE><H2><a name="h2-PORTABILITY">PORTABILITY</a></H2><PRE>
       These functions are described in the  XSI  Curses  standard,  Issue  4.
       They  read  single-byte  characters only.  The standard does not define
       any error conditions.  This implementation returns <B>ERR</B>  if  the  window
       pointer is null, or if the lower-level <B><A HREF="curs_getch.3X.html">wgetch(3X)</A></B> call returns an <B>ERR</B>.

       SVr3  and  early  SVr4  curses  implementations did not reject function
       keys; the SVr4.0 documentation claimed that  "special  keys"  (such  as
       function  keys, "home" key, "clear" key, <I>etc</I>.) are "interpreted", with-
       out giving details.  It lied.  In fact, the "character" value  appended
       to  the  string by those implementations was predictable but not useful
       (being, in fact, the low-order eight bits of the key's KEY_ value).

       The functions <B>getnstr</B>, <B>mvgetnstr</B>, and <B>mvwgetnstr</B> were present  but  not
       documented in SVr4.

       X/Open Curses, Issue 5 (2007) stated that these functions "read at most
       <I>n</I> bytes" but did not state whether the terminating NUL  is  counted  in
       that  limit.   X/Open  Curses,  Issue 7 (2009) changed that to say they
       "read at most <I>n</I>-1 bytes" to allow for the terminating NUL.  As of 2018,
       some implementations do, some do not count it:

       <B>o</B>   ncurses  6.1  and PDCurses do not count the NUL in the given limit,
           while

       <B>o</B>   Solaris SVr4 and NetBSD curses count the NUL as part of the limit.

       <B>o</B>   Solaris xcurses provides both:  its  wide-character  <B>wget_nstr</B>  re-
           serves a NUL, but its <B>wgetnstr</B> does not count the NUL consistently.

       In SVr4 curses, a negative value of <I>n</I> tells <B>wgetnstr</B> to assume that the
       caller's buffer is large enough to hold the result, i.e., to  act  like
       <B>wgetstr</B>.   X/Open  Curses does not mention this (or anything related to
       negative or zero values of <I>n</I>), however  most  implementations  use  the
       feature, with different limits:

       <B>o</B>   Solaris  SVr4  curses  and  PDCurses limit the result to 255 bytes.
           Other Unix systems than Solaris are likely to use the same limit.

       <B>o</B>   Solaris xcurses limits the result to <B>LINE_MAX</B> bytes.

       <B>o</B>   NetBSD 7 assumes no particular limit for the result  from  <B>wgetstr</B>.
           However,  it  limits  the <B>wgetnstr</B> parameter <I>n</I> to ensure that it is
           greater than zero.

           A comment in NetBSD's source code states that this is specified  in
           SUSv2.

       <B>o</B>   ncurses  (before  6.2)  assumes  no particular limit for the result
           from <B>wgetstr</B>, and treats the <I>n</I>  parameter  of  <B>wgetnstr</B>  like  SVr4
           curses.

       <B>o</B>   ncurses  6.2  uses  <B>LINE_MAX</B>,  or a larger (system-dependent) value
           which the <B>sysconf</B> function may provide.   If  neither  <B>LINE_MAX</B>  or
           <B>sysconf</B>  is available, ncurses uses the POSIX value for <B>LINE_MAX</B> (a
           2048 byte limit).  In either case, it reserves a byte for the  ter-
           minating NUL.

       Although  <B>getnstr</B>  is equivalent to a series of calls to <B>getch</B>, it also
       makes changes to the curses modes to allow simple editing of the  input
       buffer:

       <B>o</B>   <B>getnstr</B>  saves  the  current  value of the <B>nl</B>, <B>echo</B>, <B>raw</B> and <B>cbreak</B>
           modes, and sets <B>nl</B>, <B>noecho</B>, <B>noraw</B>, and <B>cbreak</B>.

           <B>getnstr</B> handles the echoing of characters, rather than  relying  on
           the caller to set an appropriate mode.

       <B>o</B>   It  also  obtains  the <I>erase</I> and <I>kill</I> characters from <B>erasechar</B> and
           <B>killchar</B>, respectively.

       <B>o</B>   On return, <B>getnstr</B> restores the modes to their previous values.

       Other implementations differ in their treatment of special characters:

       <B>o</B>   While they may set the <I>echo</I> mode, other implementations do not mod-
           ify  the  <I>raw</I> mode, They may take the <I>cbreak</I> mode set by the caller
           into account when deciding whether to handle echoing within <B>getnstr</B>
           or as a side-effect of the <B>getch</B> calls.

       <B>o</B>   The original ncurses (as pcurses in 1986) set <B>noraw</B> and <B>cbreak</B> when
           accepting input for <B>getnstr</B>.  That may have been done to make func-
           tion- and cursor-keys work; it is not necessary with ncurses.

           Since  1995, ncurses has provided signal handlers for INTR and QUIT
           (e.g., <B>^C</B> or <B>^\</B>).  With the <B>noraw</B> and <B>cbreak</B>  settings,  those  may
           catch  a  signal  and stop the program, where other implementations
           allow one to enter those characters in the buffer.

       <B>o</B>   Starting in 2021 (ncurses 6.3), <B>getnstr</B> sets <B>raw</B>, rather than <B>noraw</B>
           and  <B>cbreak</B> for better compatibility with SVr4-curses, e.g., allow-
           ing one to enter a <B>^C</B> into the buffer.


</PRE><H2><a name="h2-SEE-ALSO">SEE ALSO</a></H2><PRE>
       <B><A HREF="curses.3X.html">curses(3X)</A></B>, <B><A HREF="curs_getch.3X.html">curs_getch(3X)</A></B>, <B><A HREF="curs_termattrs.3X.html">curs_termattrs(3X)</A></B>, <B><A HREF="curs_variables.3X.html">curs_variables(3X)</A></B>.



                                                               <B><A HREF="curs_getstr.3X.html">curs_getstr(3X)</A></B>
</PRE>
<div class="nav">
<ul>
<li><a href="#h2-NAME">NAME</a></li>
<li><a href="#h2-SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#h2-DESCRIPTION">DESCRIPTION</a></li>
<li><a href="#h2-RETURN-VALUE">RETURN VALUE</a></li>
<li><a href="#h2-NOTES">NOTES</a></li>
<li><a href="#h2-PORTABILITY">PORTABILITY</a></li>
<li><a href="#h2-SEE-ALSO">SEE ALSO</a></li>
</ul>
</div>
</BODY>
</HTML>
