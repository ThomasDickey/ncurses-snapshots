<!--
  ****************************************************************************
  * Copyright 2019,2020 Thomas E. Dickey                                     *
  * Copyright 2000-2016,2017 Free Software Foundation, Inc.                  *
  *                                                                          *
  * Permission is hereby granted, free of charge, to any person obtaining a  *
  * copy of this software and associated documentation files (the            *
  * "Software"), to deal in the Software without restriction, including      *
  * without limitation the rights to use, copy, modify, merge, publish,      *
  * distribute, distribute with modifications, sublicense, and/or sell       *
  * copies of the Software, and to permit persons to whom the Software is    *
  * furnished to do so, subject to the following conditions:                 *
  *                                                                          *
  * The above copyright notice and this permission notice shall be included  *
  * in all copies or substantial portions of the Software.                   *
  *                                                                          *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  *
  * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF               *
  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.   *
  * IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,   *
  * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR    *
  * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR    *
  * THE USE OR OTHER DEALINGS IN THE SOFTWARE.                               *
  *                                                                          *
  * Except as contained in this notice, the name(s) of the above copyright   *
  * holders shall not be used in advertising or otherwise to promote the     *
  * sale, use or other dealings in this Software without prior written       *
  * authorization.                                                           *
  ****************************************************************************
  * @Id: curs_trace.3x,v 1.21 2020/02/02 23:34:34 tom Exp @
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta name="generator" content="Manpage converted by man2html - see https://invisible-island.net/scripts/readme.html#others_scripts">
<TITLE>curs_trace 3X</TITLE>
<link rel="author" href="mailto:bug-ncurses@gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</HEAD>
<BODY>
<H1 class="no-header">curs_trace 3X</H1>
<PRE>
<B><A HREF="curs_trace.3X.html">curs_trace(3X)</A></B>                                                  <B><A HREF="curs_trace.3X.html">curs_trace(3X)</A></B>




</PRE><H2><a name="h2-NAME">NAME</a></H2><PRE>
       <B>curses_trace</B>, <B>trace</B>, <B>_tracef</B>, <B>_traceattr</B>, <B>_traceattr2</B>, <B>_tracecchar_t</B>,
       <B>_tracecchar_t2</B>, <B>_tracechar</B>, <B>_tracechtype</B>, <B>_tracechtype2</B>, <B>_nc_tracebits</B>,
       <B>_tracedump</B>, <B>_tracemouse</B> - <B>curses</B> debugging routines


</PRE><H2><a name="h2-SYNOPSIS">SYNOPSIS</a></H2><PRE>
       <B>#include</B> <B>&lt;curses.h&gt;</B>

       <B>unsigned</B> <B>curses_trace(const</B> <B>unsigned</B> <I>param</I><B>);</B>

       <B>void</B> <B>_tracef(const</B> <B>char</B> <B>*</B><I>format</I><B>,</B> <B>...);</B>

       <B>char</B> <B>*_traceattr(attr_t</B> <I>attr</I><B>);</B>
       <B>char</B> <B>*_traceattr2(int</B> <I>buffer</I><B>,</B> <B>chtype</B> <I>ch</I><B>);</B>
       <B>char</B> <B>*_tracecchar_t(const</B> <B>cchar_t</B> <B>*</B><I>string</I><B>);</B>
       <B>char</B> <B>*_tracecchar_t2(int</B> <I>buffer</I><B>,</B> <B>const</B> <B>cchar_t</B> <B>*</B><I>string</I><B>);</B>
       <B>char</B> <B>*_tracechar(int</B> <I>ch</I><B>);</B>
       <B>char</B> <B>*_tracechtype(chtype</B> <I>ch</I><B>);</B>
       <B>char</B> <B>*_tracechtype2(int</B> <I>buffer</I><B>,</B> <B>chtype</B> <I>ch</I><B>);</B>

       <B>void</B> <B>_tracedump(const</B> <B>char</B> <B>*</B><I>label</I><B>,</B> <B>WINDOW</B> <B>*</B><I>win</I><B>);</B>
       <B>char</B> <B>*_nc_tracebits(void);</B>
       <B>char</B> <B>*_tracemouse(const</B> <B>MEVENT</B> <B>*</B><I>event</I><B>);</B>

       /* deprecated */
       <B>void</B> <B>trace(const</B> <B>unsigned</B> <B>int</B> <I>param</I><B>);</B>


</PRE><H2><a name="h2-DESCRIPTION">DESCRIPTION</a></H2><PRE>
       The <I>curses</I> <I>trace</I> routines are used for debugging the ncurses libraries,
       as well as applications which use the ncurses libraries.  Some  limita-
       tions apply:

       <B>o</B>   Aside from <B>curses_trace</B>, the other functions are normally available
           only with the debugging library e.g., <I>libncurses</I><B>_</B><I>g.a</I>.

           All of the trace functions may be compiled into any model  (shared,
           static, profile) by defining the symbol <B>TRACE</B>.

       <B>o</B>   Additionally,  the  functions  which use <B>cchar_t</B> are only available
           with the wide-character configuration of the libraries.


</PRE><H3><a name="h3-Functions">Functions</a></H3><PRE>
       The principal parts of this interface are

       <B>o</B>   <B>curses_trace</B>, which selectively enables different tracing features,
           and

       <B>o</B>   <B>_tracef</B>, which writes formatted data to the <I>trace</I> file.

           The other functions either return a pointer to a string-area (allo-
           cated by the corresponding function), or return no value  (such  as
           <B>_tracedump</B>,  which  implements  the  screen dump for <B>TRACE_UPDATE</B>).
           The caller should not free these strings, since the  allocation  is
           reused on successive calls.  To work around the problem of a single
           string-area per  function,  some  use  a  buffer-number  parameter,
           telling the library to allocate additional string-areas.

       The <B>curses_trace</B> function is always available, whether or not the other
       trace functions are available:

       <B>o</B>   If tracing is available, calling <B>curses_trace</B> with a nonzero param-
           eter updates the trace mask, and returns the previous trace mask.

           When the trace mask is nonzero, ncurses creates the file "trace" in
           the current directory for output.  If the file already  exists,  no
           tracing is done.

       <B>o</B>   If tracing is not available, <B>curses_trace</B> returns zero (0).


</PRE><H3><a name="h3-Trace-Parameter">Trace Parameter</a></H3><PRE>
       The  trace  parameter  is  formed  by  OR'ing  values  from the list of
       <B>TRACE_</B><I>xxx</I> definitions in <B>&lt;curses.h&gt;</B>.  These include:

       <B>TRACE_DISABLE</B>
            turn off tracing by passing a zero parameter.

            The library flushes the output file, but retains an open  file-de-
            scriptor  to the trace file so that it can resume tracing later if
            a nonzero parameter is passed to the <B>curses_trace</B> function.

       <B>TRACE_TIMES</B>
            trace user and system times of updates.

       <B>TRACE_TPUTS</B>
            trace <B><A HREF="curs_terminfo.3X.html">tputs(3X)</A></B> calls.

       <B>TRACE_UPDATE</B>
            trace update actions, old &amp; new screens.

       <B>TRACE_MOVE</B>
            trace cursor movement and scrolling.

       <B>TRACE_CHARPUT</B>
            trace all character outputs.

       <B>TRACE_ORDINARY</B>
            trace all update actions.  The old and  new  screen  contents  are
            written to the trace file for each refresh.

       <B>TRACE_CALLS</B>
            trace  all curses calls.  The parameters for each call are traced,
            as well as return values.

       <B>TRACE_VIRTPUT</B>
            trace virtual character puts, i.e., calls to <B>addch</B>.

       <B>TRACE_IEVENT</B>
            trace low-level input processing, including timeouts.

       <B>TRACE_BITS</B>
            trace state of TTY control bits.

       <B>TRACE_ICALLS</B>
            trace internal/nested calls.

       <B>TRACE_CCALLS</B>
            trace per-character calls.

       <B>TRACE_DATABASE</B>
            trace read/write of terminfo/termcap data.

       <B>TRACE_ATTRS</B>
            trace changes to video attributes and colors.

       <B>TRACE_MAXIMUM</B>
            maximum trace level, enables all of the separate trace features.

       Some tracing features are enabled whenever the  <B>curses_trace</B>  parameter
       is  nonzero.   Some features overlap.  The specific names are used as a
       guideline.


</PRE><H3><a name="h3-Initialization">Initialization</a></H3><PRE>
       These functions check the <B>NCURSES_TRACE</B> environment  variable,  to  set
       the tracing feature as if <B>curses_trace</B> was called:

           filter, initscr, new_prescr, newterm, nofilter, restartterm,
           ripoffline, setupterm, slk_init, tgetent, use_env,
           use_extended_names, use_tioctl


</PRE><H3><a name="h3-Command-line-Utilities">Command-line Utilities</a></H3><PRE>
       The  command-line  utilities  such  as  <B><A HREF="tic.1M.html">tic(1)</A></B> provide a verbose option
       which extends the set of messages written using the <B>curses_trace</B>  func-
       tion.   Both  of  these  (<B>-v</B>  and  <B>curses_trace</B>)  use the same variable
       (<B>_nc_tracing</B>), which determines the messages which are written.

       Because the command-line utilities may  call  initialization  functions
       such  as <B>setupterm</B>, <B>tgetent</B> or <B>use_extended_names</B>, some of their debug-
       ging output may be directed to the <I>trace</I> file if the <B>NCURSES_TRACE</B>  en-
       vironment variable is set:

       <B>o</B>   messages produced in the utility are written to the standard error.

       <B>o</B>   messages produced by the underlying library are written to <I>trace</I>.

       If  ncurses  is built without tracing, none of the latter are produced,
       and fewer diagnostics are provided by the command-line utilities.


</PRE><H2><a name="h2-RETURN-VALUE">RETURN VALUE</a></H2><PRE>
       Routines which return a value are designed to be used as parameters  to
       the <B>_tracef</B> routine.


</PRE><H2><a name="h2-PORTABILITY">PORTABILITY</a></H2><PRE>
       These  functions  are not part of the XSI interface.  Some other curses
       implementations are known to have similar features, but  they  are  not
       compatible with ncurses:

       <B>o</B>   SVr4  provided  <B>traceon</B>  and <B>traceoff</B>, to control whether debugging
           information was written to the "trace" file.  While  the  functions
           were  always  available, this feature was only enabled if <B>DEBUG</B> was
           defined when building the library.

           The SVr4 tracing feature is undocumented.

       <B>o</B>   PDCurses provides <B>traceon</B> and <B>traceoff</B>, which (like SVr4)  are  al-
           ways  available, and enable tracing to the "trace" file only when a
           debug-library is built.

           PDCurses has a short description of these functions,  with  a  note
           that  they are not present in X/Open Curses, ncurses or NetBSD.  It
           does not mention SVr4, but the functions'  inclusion  in  a  header
           file section labeled "Quasi-standard" hints at the origin.

       <B>o</B>   NetBSD  does  not  provide functions for enabling/disabling traces.
           It  uses  environment   variables   <B>CURSES_TRACE_MASK</B>   and   <B>CURS-</B>
           <B>ES_TRACE_FILE</B>  to  determine  what is traced, and where the results
           are written.  This is available only when a debug-library is built.

           The NetBSD tracing feature is undocumented.

       A few ncurses functions are not  provided  when  symbol  versioning  is
       used:

           _nc_tracebits, _tracedump, _tracemouse

       The  original  <B>trace</B> routine was deprecated because it often conflicted
       with application names.


</PRE><H2><a name="h2-SEE-ALSO">SEE ALSO</a></H2><PRE>
       <B><A HREF="curses.3X.html">curses(3X)</A></B>.



                                                                <B><A HREF="curs_trace.3X.html">curs_trace(3X)</A></B>
</PRE>
<div class="nav">
<ul>
<li><a href="#h2-NAME">NAME</a></li>
<li><a href="#h2-SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#h2-DESCRIPTION">DESCRIPTION</a>
<ul>
<li><a href="#h3-Functions">Functions</a></li>
<li><a href="#h3-Trace-Parameter">Trace Parameter</a></li>
<li><a href="#h3-Initialization">Initialization</a></li>
<li><a href="#h3-Command-line-Utilities">Command-line Utilities</a></li>
</ul>
</li>
<li><a href="#h2-RETURN-VALUE">RETURN VALUE</a></li>
<li><a href="#h2-PORTABILITY">PORTABILITY</a></li>
<li><a href="#h2-SEE-ALSO">SEE ALSO</a></li>
</ul>
</div>
</BODY>
</HTML>
